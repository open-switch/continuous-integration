steps:
  - label: ":python: Format and Test"
    command: |
      echo "--- Installing dependencies"
      pipenv install --deploy --dev
      pipenv run pip install black
      echo "--- Running formatter"
      pipenv run black --check .
      echo "+++ Testing"
      pipenv run pytest --cov=opx/ tests/ --cov-report=xml --cov-report=term
      bash <(curl -s https://codecov.io/bash)
